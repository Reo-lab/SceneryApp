<div class="container" style="margin-top: 50px;">
  <div class="row">
    <% @images.each do |image| %>
      <div class="col-md-4 mb-4">
        <div class="image-item border rounded p-3" style="position: relative; height: 100%; display: flex; flex-direction: column; justify-content: space-between;">
          <h3><%= image.title %></h3>
          <p><%= image.description %></p>

          <% if image.photo.attached? %>
            <a href="#" data-bs-toggle="modal" data-bs-target="#imageModal<%= image.id %>">
              <%= image_tag image.photo, class: 'img-fluid mb-1' %>
            </a>
          <% else %>
            <p>画像がありません</p>
          <% end %>

          <p class="mb-1" style="font-size: 14px; color: #555; margin-bottom: 5px;">投稿者: <%= image.user.name if image.user %></p>

          <p class="mb-0" style="position: absolute; bottom: 10px; right: 10px; font-size: 12px; color: #888;">
            投稿日: <%= image.created_at.strftime("%Y-%m-%d") %>
          </p>
        </div>
      </div>

      <div class="modal fade" id="imageModal<%= image.id %>" tabindex="-1" aria-labelledby="imageModalLabel<%= image.id %>" aria-hidden="true" data-bs-backdrop="true" data-bs-keyboard="true">
        <div class="modal-dialog modal-dialog-centered modal-xl"> 
          <div class="modal-content" style="background-color: transparent; border: none;">
            <div class="modal-header" style="border-bottom: none; ">
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="padding: 0; display: flex; justify-content: center; align-items: center; height: 100%;">
              <%= image_tag image.photo, style: "max-width: 100%; max-height: 80vh; object-fit: contain; object-position: center;" %>
            </div>
          </div>
        </div>
      </div>

    <% end %>
  </div>
</div>